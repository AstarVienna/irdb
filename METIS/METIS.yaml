---
### METIS Instrument common effects

object: instrument
alias: INST
name: METIS
description: base configuration for METIS

properties:
  temperature: -248
  filter_file_format: "filters/TC_filter_{}.dat"
  pupil_transmission: 1.0

effects:
  - name: metis_cfo_surfaces
    description: surface list for common fore optics
    class: SurfaceList
    kwargs:
      filename: LIST_METIS_mirrors_cfo.dat

  - name: slit_wheel
    description: collection of field masks and slits
    class: SlitWheel
    kwargs:
      slit_names:
        - A
        - B
        - C
        - D
        - E
      filename_format: MASK_slit_{}.dat
      current_slit: "!OBS.slit"
      include: "!OBS.slit"

  - name: cold_stop
    description: pupil transmission with respect to full aperture
    class: PupilTransmission
    include: True
    kwargs:
      transmission: "!INST.pupil_transmission"
      minimum_throughput: !!float 0.



#  - name : metis_adc_residuals
#    class : AtmosphericDispersionCorrection
#    include : False
#    kwargs:
#      altitude: "!ATMO.altitude"
#      longitude: "!ATMO.longitude"
#      latitude: "!ATMO.latitude"
#      airmass: "!OBS.airmass"
#      temperature: "!ATMO.temperature"
#      humidity: "!ATMO.humidity"
#      pressure: "!ATMO.pressure"
#      pupil_angle: "!OBS.pupil_angle"
#      efficiency: 1
#      wave_mid: "!SIM.spectral.wave_mid"
#      quick_adc: True
