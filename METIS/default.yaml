---
### default observation parameters needed for a METIS simulation

object: configuration
alias: OBS
name: METIS_default_configuration
description: default parameters needed for a METIS simulation
date_modified: 2022-01-07
changes:
  - 2021-12-16 (OC) chopnod defaults to perpendicular
  - 2021-12-16 (OC) default slits renamed
  - 2022-01-07 (OC) trace files default to science version

packages:
  - Armazones
  - ELT
  - METIS

yamls:
  - Armazones.yaml
  - ELT.yaml                # overrides below
  - METIS.yaml

properties:
  modes: ["img_lm"]
  airmass: 1.2
  declination: -30
  hour_angle: 0
  pupil_angle: 0
  exptime: 1.
  dit: 1              # when exptime is given and auto_exposure is on,
  ndit: 1             # these values are ignored
  auto_exposure:
    fill_frac: 0.75   # fraction to which full well is filled in one DIT

mode_yamls:
  - object: observation
    alias: OBS
    name: img_lm
    description: "METIS LM-band imaging"
    yamls:
      - METIS_IMG_LM.yaml
      - METIS_DET_IMG_LM.yaml
    properties:
      psf_file: PSF_SCAO_9mag_06seeing.fits
      filter_name: Lp
      nd_filter_name: open
      slit: false
      adc: const_90

  - object: observation
    alias: OBS
    name: img_n
    description: "METIS N-band imaging"
    yamls:
      - METIS_IMG_N.yaml
      - METIS_DET_IMG_N_GeoSnap.yaml
    properties:
      psf_file: PSF_SCAO_9mag_06seeing.fits
      filter_name: N2
      nd_filter_name: open
      slit: false
      adc: const_90
      chop_offsets: [3, 0]  # perpendicular chopping and nodding
      nod_offsets: [0, 3]

  - object: observation
    alias: OBS
    name: lss_l
    description: "METIS L-band slit spectroscopy"
    yamls:
      - METIS_IMG_LM.yaml
      - METIS_LSS.yaml
      - METIS_DET_IMG_LM.yaml
    properties:
      psf_file: PSF_LM_9mag_06seeing.fits
      trace_file: TRACE_LSS_L_sci.fits
      slit: C-38_1
      adc: const_90
      filter_name: L_spec
      nd_filter_name: open

  - object: observation
    alias: OBS
    name: lss_m
    description: "METIS LM-band slit spectroscopy"
    yamls:
      - METIS_IMG_LM.yaml
      - METIS_LSS.yaml
      - METIS_DET_IMG_LM.yaml
    properties:
      psf_file: PSF_LM_9mag_06seeing.fits
      trace_file: TRACE_LSS_M_sci.fits
      slit: C-38_1
      adc: const_90
      filter_name: M_spec
      nd_filter_name: open

  - object: observation
    alias: OBS
    name: lss_n
    description: "METIS N-band slit spectroscopy"
    yamls:
      - METIS_IMG_N.yaml
      - METIS_LSS.yaml
      - METIS_DET_IMG_N_GeoSnap.yaml
    properties:
      psf_file: PSF_N_9mag_06seeing.fits
      trace_file: TRACE_LSS_N_sci.fits
      slit: D-57_1
      adc: const_90
      filter_name: N_spec
      nd_filter_name: open

  - object: observation
    alias: OBS
    name: lms
    description: "METIS LM-band integral-field spectroscopy, nominal mode"
    yamls:
      - METIS_LMS.yaml
      - METIS_DET_IFU.yaml
    properties:
      psf_file: PSF_SCAO_9mag_06seeing.fits
      slit: false
      adc: false
      trace_file: TRACE_LMS.fits
      wavelen: 4.2

  - object: observation     # is this a separate mode from nominal LMS?
    alias: OBS
    name: lms_extended
    description: "METIS LM-band integral-field spectroscopy, extended mode"
    yamls:
      - METIS_LMS_EXT.yaml
      - METIS_DET_IFU.yaml
    properties:
      slit: false
      adc: false

---
### default simulation parameters needed for a METIS simulation
object: simulation
alias: SIM
name: METIS_simulation_parameters
description: RC simulation parameters which need to change for a METIS run

properties:
  random:
    seed: None                         # 9001

  spectral:
    wave_min: 2.85
    wave_mid: 8.425
    wave_max: 14.0

  computing:
    spline_order: 3
    preload_field_of_views: True

---
### override for the ELT configuration
object : telescope
alias : TEL
name : ELT_overrides
description : override telescope configuration

properties:
  ter_curve:
    filename: "TER_ELT_6_mirror_field_track.dat"
