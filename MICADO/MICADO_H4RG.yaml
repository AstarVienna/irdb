### H4RG DETECTOR
object : detector
alias : DET
name : MICADO_DET
description : A set of 9 H4RG detectors

properties :
    image_plane_id : 0
    temperature : -230
    dit : "!OBS.dit"
    ndit : "!OBS.ndit"
    width: 1024
    height: 1024
    x: 0
    y: 0

effects :
-   name: full_detector_array
    description : THe full 3x3 MICADO detector array list
    class: DetectorList
    include: False
    kwargs:
        filename : FPA_array_layout.dat
        active_detectors : "all"

-   name: detector_window
    class: DetectorWindow
    description: Cut-out of the focal plane image with custom dimensions and coordinates
    include: True
    kwargs:
        image_plane_id: 0
        pixel_size: 0.015
        x: "!DET.x"
        y: "!DET.y"
        width: "!DET.width"
        height: "!DET.height"
        units: pixel

-   name : qe_curve
    description : Quantum efficiency curves for each detector
    class : QuantumEfficiencyCurve
    kwargs :
        filename : QE_detector_H2RG.dat

-   name: exposure_action
    description: Summing up sky signal for all DITs and NDITs
    class: SummedExposure

-   name: dark_current
    description : MICADO dark current
    class: DarkCurrent
    # [e-/s] level of dark current for each detector
    kwargs:
        value: 0.1

-   name: shot_noise
    description : apply poisson shot noise to images
    class: ShotNoise

-   name: detector_linearity
    description : Linearity characteristics of H4RG chips
    class: LinearityCurve
    kwargs:
        filename : FPA_linearity.dat

-   name: border_reference_pixels
    description: Blanks the signal on N edge row and column pixels
    class: ReferencePixelBorder
    kwargs:
        all: 0

-   name : readout_noise
    description : Readout noise frames
    class : PoorMansHxRGReadoutNoise
    kwargs :
        noise_std : 12
        n_channels : 64

-   name : source_fits_keywords
    decription : adds meta data from Source object to FITS header
    class : SourceDescriptionFitsKeywords
    include : True

# E           ValueError: Illegal value: datetime.date(2021, 2, 22).
#-   name : effects_fits_keywords
#    decription : adds meta dicts from all Effect objects to FITS header
#    class : EffectsMetaKeywords
#    include : True

-   name : config_fits_keywords
    decription : adds all UserCommands dicts to FITS header
    class : SimulationConfigFitsKeywords
    include : True

# E           FileNotFoundError: [Errno 2] No such file or directory: 'FITS_extra_keywords.yaml'
-   name : extra_fits_keywords
    decription : adds extra FITS keywords from a yaml file
    class : ExtraFitsKeywords
    include : True
#    kwargs :
#      filename: FITS_extra_keywords.yaml


