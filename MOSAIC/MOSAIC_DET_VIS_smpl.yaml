---
### MOSAIC VISUAL detector (simple)
object: detector
alias: DET
name: MOSAIC_DET_VIS_smpl
description: simple virtual detector for one fiber bundle
data_modified: 2025-07-17


properties:
  detector: MOSAIC_DET_VIS
  image_plane_id: 0
  temperature: -230
  dit: "!OBS.exptime"
  ndit: 1              # this is a CCD which should only know exptime
  gain: 1.0
  layout:
    file_name: "FPA_mosaic_VIS_layout.dat"
  qe_curve:
    file_name: "QE_VIS_ML2_depleted.dat"

effects:
  - name: detector_array
    description: MOSAIC VIS detector array list
    class: DetectorList
    kwargs:
      filename: "!DET.layout.file_name"

  - name: quantum_efficiency
    description: Quantum efficiency curves for each detector
    class: QuantumEfficiencyCurve
    kwargs:
      filename: "!DET.qe_curve.file_name"

  - name: exposure_integration
    description: Summing up sky signal for all DITs and NDITs
    class: ExposureIntegration

  - name: shot_noise
    description: apply poisson shot noise to images
    class: ShotNoise

  - name: ad_conversion
    description: Apply gain and convert electron counts
    class: ADConversion
    kwargs:
      dtype: float32
      gain: "!DET.gain"
